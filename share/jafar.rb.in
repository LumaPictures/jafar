require 'rbconfig'

module Jafar
  TOPDIR = "${Jafar_BINARY_DIR}"
  class << self
    ## Sets load path using the system type
    attr_reader :system_type
    attr_reader :library_path
    def system_type=(system_type)
      @system_type = system_type
      @library_path = "${RUBIES_OUTPUT_DIR}"
      $LOAD_PATH << @library_path
    end
  end
end

Jafar.system_type = Jafar.detect_system_type

puts ""
puts "Welcome to jafar !         (c) 2004-20010 LAAS-CNRS"
puts "jafar_dir: #{Jafar::TOPDIR}"
puts ""

puts "*** Loading kernel module"
require 'jafar/kernel'
print "*** Available modules: "
puts Dir[File.join(Jafar.library_path, "*.rb")].map { |p| File.basename(p, '.rb') }.join(', ')

puts ""

